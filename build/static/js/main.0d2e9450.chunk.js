(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{170:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),i=a(16),s=a.n(i),o=a(29),u=a(13),l=a.n(u),d=a(23),b=a(6),j=a(24),m=(a(169),a(170),a(171),c.a.createContext({})),f=a(66),h=a(65);function p(){return Object(n.jsx)("nav",{className:"navbar navbar-expand-sm navbar-toggleable-sm navbar-light border-bottom box-shadow mb-3 divOfNavMenu",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":".navbar-collapse","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"navbar navbar-collapse collapse d-sm-inline-flex",children:Object(n.jsxs)("ul",{className:"navbar-nav flex-grow-1",children:[Object(n.jsxs)("li",{className:"nav-item",children:[Object(n.jsxs)(o.c,{to:"/Vehicles",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.a,color:"blue",size:"lg"})," ","Vehicles"]}),Object(n.jsxs)(o.c,{to:"/Vehicle",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.a,color:"blue",size:"lg"})," ","Create/Edit Vehicle"]})]}),Object(n.jsxs)("li",{className:"nav-item",children:[Object(n.jsxs)(o.c,{to:"/Categories",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.b,color:"blue",size:"lg"})," ","Categories"]}),Object(n.jsxs)(o.c,{to:"/Category",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.b,color:"blue",size:"lg"})," ","Create/Edit Category"]})]}),Object(n.jsxs)("li",{className:"nav-item",children:[Object(n.jsxs)(o.c,{to:"/Manifacturers",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.c,color:"blue",size:"lg"})," ","Manifacturers"]}),Object(n.jsxs)(o.c,{to:"/Manifacturer",className:"nav-link text-primary mainMenuListItem",activeClassName:"activeLink",children:[Object(n.jsx)(h.a,{icon:f.c,color:"blue",size:"lg"})," ","Create/Edit Manifacturer"]})]})]})})]})})}function O(){var e=Object(j.h)();return Object(n.jsx)("div",{children:Object(n.jsxs)("h3",{children:["Sorry, there is no page like ",Object(n.jsx)("code",{children:e.pathname})]})})}var x=function(){return Object(n.jsx)("div",{className:"preloader",children:Object(n.jsx)("img",{src:"/images/spinner.svg",alt:"spinner"})})},g=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_API_PREFIX:"api/",REACT_APP_BASE_URL:"https://vehicletrackingsystemapi.azurewebsites.net/",REACT_APP_CATEGORIES_API_PREFIX:"categories",REACT_APP_MANIFACTURERS_API_PREFIX:"manifacturers",REACT_APP_VEHICLES_API_PREFIX:"vehicles"}),t=e.REACT_APP_BASE_URL,a=e.REACT_APP_BASE_API_PREFIX,n=e.REACT_APP_CATEGORIES_API_PREFIX,r=t+a;return{VEHICLES_API_URL:r+e.REACT_APP_VEHICLES_API_PREFIX,CATEGORIES_API_URL:r+n,MANIFACTURERS_API_URL:r+e.REACT_APP_MANIFACTURERS_API_PREFIX,FETCH_OPTIONS:{cacheLife:0,cachePolicy:"no-cache"},BASE_URL:t,BASE_API_URL:r,CATEGORIES_ICON_URL:t+"/images/categoryIcons/",MAX_IMAGE_UPLOAD_SIZE:1048576,WRONG_IMAGE_ERROR:"The file must be an image whose size is smaller than or equal to 1 MB",POSITIVE_NUMBER_RULE:"textIsPositiveNumber",REQUIRED_RULE:"textIsRequired",MAX_WEIGHT:1e6}}(),v=a(47),E=a(30),R=a(19),N=a(40);function C(e){return!isNaN(e)&&parseFloat(e)>0}var _=function(e){return e&&e.toString().trim().length>0},y=a(70),I=(a(113),a(8)),w=function(e,t){return{title:"Confirmation needed",message:t,buttons:[{label:"Yes",onClick:function(){return e()}},{label:"No"}]}};function S(e,t,a){var n=a.target.value;return a.target.type&&"checkbox"===a.target.type.toLowerCase()&&(n=a.target.checked),t(Object(E.a)(Object(E.a)({},e),{},Object(I.a)({},a.target.name,n))),!0}var U=function(e){return e.size<=g.MAX_IMAGE_UPLOAD_SIZE},A=function(e){return e?e.status&&e.title?e.status+":"+e.title:"string"===typeof e||e instanceof String?e:"":""};function L(e,t){return!(e>g.MAX_WEIGHT)||(t(!1,"Maximum weight is ".concat(g.MAX_WEIGHT," kg")),!1)}var V=function(e){var t=e.uiState,a=e.data,r=e.error,c=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{children:t.message&&t.message}),Object(n.jsx)("p",{children:A(a)}),Object(n.jsx)("p",{children:r&&"(Error:"+r.toString()+")"})]});return Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("div",{className:t.successful?"alert alert-primary":"alert alert-danger",role:"alert",children:c})})},k=function(e){var t=e.updateSubmitButtonFunction,a=e.loading,r=e.submitButtonType,c=e.id,i=e.extraDisabledConditionForDelete,s=void 0!==i&&i;return Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsxs)("button",{className:"btn btn-primary btn-block",onClick:function(){return t("CreateUpdate")},disabled:a,value:"CreateUpdateValue",children:[a&&"CreateUpdate"===r&&Object(n.jsx)("span",{className:"spinner-border spinner-border-sm"}),c>0?"Update":"Create"]}),c>0&&Object(n.jsxs)("button",{className:"btn btn-secondary btn-block",disabled:a||s,onClick:function(){return t("Delete")},value:"DeleteValue",children:[a&&"Delete"===r&&Object(n.jsx)("span",{className:"spinner-border spinner-border-sm"}),"Delete"]})]})},M=Object(N.a)((function(e){return{formControl:{width:250}}})),T=function(){var e,t=M(),a=Object(j.g)(),c=Object(j.i)().id;c=null!==(e=c)&&void 0!==e?e:0;var i=Object(r.useRef)({name:"",minWeight:0,upTo:0,iconFileName:"",icon:null}),s=function(e,t){x({successful:e,message:t})},o=Object(r.useState)(i.current),u=Object(b.a)(o,2),m=u[0],f=u[1],h=Object(r.useState)({successful:!0,message:""}),p=Object(b.a)(h,2),O=p[0],x=p[1],N=Object(r.useState)(Date.now()),I=Object(b.a)(N,2),A=I[0],T=I[1],P=Object(r.useState)(Date.now()),F=Object(b.a)(P,2),D=F[0],B=F[1],W=Object(r.useState)(!1),H=Object(b.a)(W,2),G=H[0],Q=H[1],z=Object(r.useState)(0),X=Object(b.a)(z,2),Y=X[0],q=X[1],K=Object(v.b)(g.CATEGORIES_API_URL,g.FETCH_OPTIONS),J=K.get,Z=K.post,$=K.put,ee=K.del,te=K.response,ae=K.loading,ne=K.error,re=K.data;function ce(){return(ce=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(m.minWeight,s)){e.next=2;break}return e.abrupt("return");case 2:if((t=new FormData).append("name",m.name),t.append("minWeight",m.minWeight),t.append("icon",m.icon),m.icon){e.next=9;break}return s(!1,"Choose an icon for the category"),e.abrupt("return");case 9:if(U(m.icon)){e.next=12;break}return s(!1,g.WRONG_IMAGE_ERROR),e.abrupt("return");case 12:return e.next=14,Z("",t);case 14:te.ok?(f(i.current),T(Date.now()),s(!0,"Category added successfully. You can create another one...")):s(!1,"Category could not add");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(m.minWeight,s)){e.next=2;break}return e.abrupt("return");case 2:if((t=new FormData).append("id",c),t.append("name",m.name),t.append("minWeight",m.minWeight),t.append("iconFileName",m.iconFileName),null==m.icon){e.next=12;break}if(t.append("icon",m.icon),U(m.icon)){e.next=12;break}return s(!1,g.WRONG_IMAGE_ERROR),e.abrupt("return");case 12:return e.next=14,$("",t);case 14:te.ok?(T(Date.now()),B(Date.now()),s(!0,"Category successfully updated"),a.push("/category/"+c.toString())):s(!1,"Category could not updated");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return oe.apply(this,arguments)}function oe(){return(oe=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Y){e.next=3;break}return s(!1,"The category whose minimum weight is 0 cannot be deleted!"),e.abrupt("return");case 3:return e.next=5,ee("/"+m.id);case 5:te.ok?(s(!0,"Category deleted successfully. You can add a new category..."),f(i.current),a.push("/category")):s(!1,"Category could not be deleted");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("/"+c.toString());case 2:(t=e.sent)&&t.name?(f(t),s(!0,"Category loaded/reloaded successfully"),q(t.minWeight)):(s(!1,"Category could not load"),Q(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c>0&&function(){e.apply(this,arguments)}(),R.ValidatorForm.hasValidationRule(g.POSITIVE_NUMBER_RULE)||R.ValidatorForm.addValidationRule(g.POSITIVE_NUMBER_RULE,(function(e){return C(e)})),R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)||R.ValidatorForm.addValidationRule(g.REQUIRED_RULE,(function(e){return _(e)})),function(){R.ValidatorForm.hasValidationRule(g.POSITIVE_NUMBER_RULE)&&R.ValidatorForm.removeValidationRule(g.POSITIVE_NUMBER_RULE),R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)&&R.ValidatorForm.removeValidationRule(g.REQUIRED_RULE)}}),[c,J,D]);var ue=Y>0||0===c?[g.POSITIVE_NUMBER_RULE]:[],le=Y>0||0===c?["The minimum weight should be a positive number"]:[],de=Object(r.useRef)(""),be=Object(r.useCallback)((function(e){de.current=e}),[]),je=Object(n.jsx)("div",{children:Object(n.jsxs)(R.ValidatorForm,{onSubmit:function(e){e.preventDefault(),c>0?"CreateUpdate"===de.current?function(){ie.apply(this,arguments)}():Object(y.confirmAlert)(w(se,"Are you sure to delete this category?")):function(){ce.apply(this,arguments)}()},children:[0===Y&&c>0&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("span",{className:"text-danger",children:"This category is the root category, cannot be deleted and minimum weight of it cannot be changed"})}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(R.TextValidator,{id:"name",variant:"outlined",label:"Name",name:"name",className:t.formControl,value:m.name,onChange:function(e){return S(m,f,e)},validators:[g.REQUIRED_RULE],errorMessages:["Name is required"]})}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(R.TextValidator,{variant:"outlined",label:"Minimum Weight",name:"minWeight",disabled:0===Y&&c>0,className:t.formControl,value:m.minWeight,onChange:function(e){return S(m,f,e)},validators:ue,errorMessages:le})}),c>0&&Object(n.jsxs)("label",{children:["Up to:",m.upTo]}),c>0&&m.iconFileName&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("img",{src:g.CATEGORIES_ICON_URL+m.iconFileName,width:"100px",height:"100px",alt:m.iconFileName})}),Object(n.jsxs)("label",{htmlFor:"upload",children:[" ",c>0?"Change the icon":"Choose an icon",Object(n.jsx)("input",{type:"file",onChange:function(e){return f(Object(E.a)(Object(E.a)({},m),{},{icon:e.target.files[0]}))},id:"upload",name:"upload",accept:"image/png, image/jpeg"},A)]}),Object(n.jsx)(k,{updateSubmitButtonFunction:be,loading:ae,submitButtonType:de.current,id:c,extraDisabledConditionForDelete:Y<=0})]})}),me=c>0?Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary btn",onClick:function(){f(i.current),x(!0,""),a.push("/category")},children:"Create a category"})}):"";return Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsxs)("div",{className:"card card-container",children:[me,!ae&&(ne||O.message)&&Object(n.jsx)(V,{uiState:O,data:re,error:ne}),!G&&je]})})},P=a(17),F=a(136),D=a(100),B=a(75),W=a(101),H=a(59),G=a(140),Q=a(197),z=a(68),X={deQuote:function(e){return e.replace("'","")},deDoubleQuote:function(e){return e.replace('"',"")},makeStrong:function(e){return Object(n.jsx)("div",{className:"gridHeader",children:Object(n.jsx)("strong",{children:e})})}},Y=a(199),q=a(141),K=a(120),J=Object(N.a)((function(){return{root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignItems:"center"}}}}));var Z=r.memo((function(e){var t=e.width,a=e.value,c=r.useRef(null),i=r.useRef(null),s=r.useRef(null),o=r.useState(null),u=Object(b.a)(o,2),l=u[0],d=u[1],j=J(),m=r.useState(!1),f=Object(b.a)(m,2),h=f[0],p=f[1],O=r.useState(!1),x=Object(b.a)(O,2),g=x[0],v=x[1];return r.useEffect((function(){if(h)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||p(!1)}}),[p,h]),Object(n.jsxs)("div",{ref:c,className:j.root,onMouseEnter:function(){var e,t=(e=s.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;v(t),d(i.current),p(!0)},onMouseLeave:function(){p(!1)},children:[Object(n.jsx)("div",{ref:i,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(n.jsx)("div",{ref:s,className:"cellValue",children:a}),g&&Object(n.jsx)(K.a,{open:h&&null!==l,anchorEl:l,style:{width:t,marginLeft:-17},children:Object(n.jsx)(q.a,{elevation:1,style:{minHeight:c.current.offsetHeight-3},children:Object(n.jsx)(Y.a,{variant:"body2",style:{padding:8},children:a})})})]})}));function $(e){var t;return Object(n.jsx)(Z,{value:null!==(t=e.value)&&void 0!==t?t:"",width:e.colDef.width})}function ee(e){var t=e.formControlClassName,a=e.id,r=e.selectList,c=e.onChangeMethod,i=e.selectValues,s="selectListLabel"+a.toString(),o="select"+a.toString();return Object(n.jsxs)(B.a,{style:{width:"100px"},className:t,variant:"outlined",children:[Object(n.jsx)(W.a,{id:s,children:r.label}),Object(n.jsx)(D.a,{labelId:s,id:o,name:o,value:parseInt(i[a]),onChange:function(e){return c(a,e.target.value)},children:r.options.map((function(e,t){return Object(n.jsx)(H.a,{value:e.key,children:e.value},t)}))})]})}var te=Object(N.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:150}}})),ae=function(e){var t=e.apiFunction,a=e.mainWidth,i=e.enableSearch,s=e.selectLists,o=e.columns,u=e.searchHelper,j=e.enableCellExpand,m=e.showRefreshButton,f=te(),h=Object(r.useRef)(null),p=Object(r.useRef)(null),O=c.a.useState(0),x=Object(b.a)(O,2),g=x[0],v=x[1],R=c.a.useState([]),N=Object(b.a)(R,2),C=N[0],_=N[1],y=c.a.useState(!1),I=Object(b.a)(y,2),w=I[0],S=I[1],U=c.a.useState(10),A=Object(b.a)(U,2),L=A[0],V=A[1],k=c.a.useState(0),M=Object(b.a)(k,2),T=M[0],Y=M[1],q=c.a.useState(null),K=Object(b.a)(q,2),J=K[0],Z=K[1],ae=c.a.useState(""),ne=Object(b.a)(ae,2),re=ne[0],ce=ne[1],ie=s&&s.length>0,se=[];ie&&(se=s.map((function(e){return e.defaultValue.toString()})));var oe=c.a.useState(se),ue=Object(b.a)(oe,2),le=ue[0],de=ue[1],be=function(e,t){de((function(a){var n=Object(P.a)(a);return n[e]=t.toString(),0!==g&&v(0),n}))},je=c.a.useCallback(Object(d.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g,L,null===h||void 0===h||null===(a=h.current)||void 0===a?void 0:a.value,le);case 2:if(!(n=e.sent)){e.next=8;break}return Z(null),e.abrupt("return",n);case 8:return Z("An error occured"),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)}))),[t,g,L,le]),me=c.a.useCallback(Object(d.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,je();case 3:(t=e.sent)&&(a=t.rowCount,n=t.rows,Y(a),_(n)),S(!1);case 6:case"end":return e.stop()}}),e)}))),[je]),fe=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(h.current.value.length>=3||0===h.current.value.length)&&(me(),0!==g&&v(0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.a.useEffect((function(){Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[me]);var he=function(e){return e.renderCell?e.renderCell:j?$:void 0};return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{id:"refreshBar",children:[ie&&Object(n.jsx)(n.Fragment,{children:s.map((function(e,t){return Object(n.jsx)(ee,{formControlClassName:f.formControl,id:t,selectList:e,onChangeMethod:be,selectValues:le},t)}))}),i&&Object(n.jsx)(B.a,{className:f.formControl,children:Object(n.jsx)(G.a,{variant:"outlined",value:re,label:"Search",placeholder:"0 or at least 3 characters...",onChange:function(e){return ce(e.target.value)},inputRef:h,title:u})}),(m||i)&&Object(n.jsx)(B.a,{className:f.formControl,children:Object(n.jsxs)(z.a,{variant:"contained",color:"primary",type:"submit",disabled:w,onClick:fe,className:"btn-block",style:{textTransform:"none"},children:[w&&Object(n.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(n.jsx)("span",{children:"Refresh"})]})})]}),Object(n.jsx)("div",{children:Object(n.jsx)(B.a,{className:f.formControl,children:Object(n.jsx)(Q.a,{children:J&&Object(n.jsx)("span",{children:J})})})}),Object(n.jsx)("div",{children:Object(n.jsxs)(B.a,{className:f.formControl,variant:"outlined",children:[Object(n.jsx)(W.a,{id:"pageSizeLabel",children:"Rows per page"}),Object(n.jsxs)(D.a,{labelId:"pageSizeLabel",id:"pageSizeSelect",value:L,inputRef:p,onChange:function(e){V(e.target.value),0!==g&&v(0)},children:["(",Object(n.jsx)(H.a,{value:10,children:"10"},"10"),Object(n.jsx)(H.a,{value:20,children:"20"},"20"),")",Object(n.jsx)(H.a,{value:50,children:"50"},"50")]})]})}),Object(n.jsx)("div",{id:"gridContainer",style:{width:a},children:Object(n.jsx)(F.a,{autoHeight:!0,columns:o.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{disableClickEventBubbling:!0,renderHeader:function(){return X.makeStrong(e.headerName)},renderCell:he(e),cellClassName:"dataGridCell"})})),rows:C,pagination:!0,pageSize:L,rowCount:T,paginationMode:"server",onPageChange:function(e){v(e.page)},loading:w,error:J,rowsPerPageOptions:[],page:g})})]})},ne=function(e){var t=e.entityName,a=e.apiURL,c=e.entityColumns,i=e.addCategoryIcon,s=Object(v.b)(a,g.FETCH_OPTIONS).get,u=Object(r.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("/?page="+t.toString()+"&pageSize="+a.toString());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[s]),b=[{field:"___Edit___",headerName:"Action",width:200,renderCell:function(e){return function(e){return Object(n.jsx)(o.b,{to:"/".concat(t,"/").concat(e.row.id),children:"Edit or Delete"})}(e)}}].concat(Object(P.a)(c));return i&&b.push({field:"iconFileName",headerName:"Icon",width:200,renderCell:function(e){return function(e){var t=e.value;return Object(n.jsx)("img",{src:g.CATEGORIES_ICON_URL+t,width:"100px",height:"100px",alt:t})}(e)}}),Object(n.jsx)(ae,{columns:b,apiFunction:u})},re=function(){return Object(n.jsx)(ne,{apiURL:g.CATEGORIES_API_URL,addCategoryIcon:!0,entityName:"category",entityColumns:[{field:"name",headerName:"Name",width:250},{field:"minWeight",width:200,headerName:"Minimum",type:"number"},{field:"upTo",headerName:"Up To",width:200,type:"number"}]})},ce=a(266),ie=Object(N.a)((function(e){return{formControl:{width:250}}})),se=function(){var e,t=Object(r.useContext)(m).manifacturers,a=ie(),c=Object(j.g)(),i=Object(j.i)().id;i=null!==(e=i)&&void 0!==e?e:0;var s,o,u=Object(r.useRef)((s=1950,o=(new Date).getFullYear(),Array(o-s+1).fill().map((function(e,t){return s+t})))),f=Object(r.useRef)({id:0,ownerName:"",manifacturerId:t.length&&t.length>0?t[0].id:0,manifacturer:"",yearOfManifacture:(new Date).getFullYear(),categoryId:0,weight:0,categoryName:"",iconFileName:""}),h=function(e,t){M({successful:e,message:t})},p=Object(r.useState)(f.current),O=Object(b.a)(p,2),x=O[0],N=O[1],I=Object(r.useState)({successful:!0,message:""}),U=Object(b.a)(I,2),A=U[0],M=U[1],T=Object(r.useState)(Date.now()),P=Object(b.a)(T,2),F=P[0],B=P[1],G=Object(r.useState)(!1),Q=Object(b.a)(G,2),z=Q[0],X=Q[1],Y=Object(v.b)(g.VEHICLES_API_URL,g.FETCH_OPTIONS),q=Y.get,K=Y.post,J=Y.put,Z=Y.del,$=Y.response,ee=Y.loading,te=Y.error,ae=Y.data;Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("/"+i.toString());case 2:(t=e.sent)&&t.ownerName?(N(t),h(!0,"Vehicle loaded/reloaded successfully")):(h(!1,"Vehicle could not load"),X(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i>0&&function(){e.apply(this,arguments)}(),R.ValidatorForm.hasValidationRule(g.POSITIVE_NUMBER_RULE)||R.ValidatorForm.addValidationRule(g.POSITIVE_NUMBER_RULE,(function(e){return C(e)})),R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)||R.ValidatorForm.addValidationRule(g.REQUIRED_RULE,(function(e){return _(e)})),function(){R.ValidatorForm.hasValidationRule(g.POSITIVE_NUMBER_RULE)&&R.ValidatorForm.removeValidationRule(g.POSITIVE_NUMBER_RULE),R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)&&R.ValidatorForm.removeValidationRule(g.REQUIRED_RULE)}}),[i,q,F]);var ne={ownerName:x.ownerName,weight:x.weight,yearOfManifacture:x.yearOfManifacture,manifacturerId:x.manifacturerId},re=function(){return!!x.yearOfManifacture||(h(!1,"Year of manifacture is required"),!1)};function se(){return(se=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(x.weight,h)){e.next=2;break}return e.abrupt("return");case 2:if(re()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,K("",ne);case 6:$.ok?(N(f.current),h(!0,"Vehicle added successfully. You can create another one...")):h(!1,"Vehicle could not add");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(x.weight,h)){e.next=2;break}return e.abrupt("return");case 2:if(re()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,J("",Object(E.a)(Object(E.a)({},ne),{},{id:i}));case 6:$.ok?(B(Date.now()),h(!0,"Vehicle successfully updated"),c.push("/vehicle/"+i.toString())):h(!1,"Vehicle could not updated");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z("/"+x.id);case 2:$.ok?(h(!0,"Vehicle deleted successfully. You can add a new vehicle..."),N(f.current),c.push("/vehicle")):h(!1,"Vehicle could not be deleted");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de=Object(r.useRef)(""),be=Object(r.useCallback)((function(e){de.current=e}),[]),je=Object(n.jsx)("div",{children:Object(n.jsxs)(R.ValidatorForm,{onSubmit:function(e){e.preventDefault(),i>0?"CreateUpdate"===de.current?function(){oe.apply(this,arguments)}():Object(y.confirmAlert)(w(ue,"Are you sure to delete this vehicle?")):function(){se.apply(this,arguments)}()},children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(R.TextValidator,{id:"ownerName",variant:"outlined",label:"Owner name",name:"ownerName",className:a.formControl,value:x.ownerName,onChange:function(e){return S(x,N,e)},validators:[g.REQUIRED_RULE],errorMessages:["Owner Name is required"]})}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)(W.a,{id:"categoryLabel",children:"Manifacturer"}),Object(n.jsx)(D.a,{labelId:"manifacturerLabel",variant:"outlined",id:"manifacturerId",name:"manifacturerId",className:a.formControl,value:x.manifacturerId,onChange:function(e){return S(x,N,e)},children:t&&t.length&&t.map((function(e){return Object(n.jsx)(H.a,{value:e.id,children:e.name},e.id)}))})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(R.TextValidator,{variant:"outlined",label:"Weight",name:"weight",className:a.formControl,value:x.weight,onChange:function(e){return S(x,N,e)},validators:[g.POSITIVE_NUMBER_RULE],errorMessages:"Weight should be a positive number"})}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(ce.a,{id:"yearOfManifacture",name:"yearOfManifacture",className:a.formControl,options:u.current,getOptionLabel:function(e){return e.toString()},value:x.yearOfManifacture,onChange:function(e,t){N(Object(E.a)(Object(E.a)({},x),{},{yearOfManifacture:t}))},renderInput:function(e){return Object(n.jsx)(R.TextValidator,Object(E.a)(Object(E.a)({},e),{},{label:"Year of manifacture",variant:"outlined"}))}})}),i>0&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("label",{children:["Category:",x.categoryName]})}),i>0&&x.iconFileName&&Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("img",{src:g.CATEGORIES_ICON_URL+x.iconFileName,width:"100px",height:"100px",alt:x.iconFileName})}),Object(n.jsx)(k,{updateSubmitButtonFunction:be,loading:ee,submitButtonType:de.current,id:i})]})}),me=i>0?Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary btn",onClick:function(){N(f.current),M(!0,""),c.push("/vehicle")},children:"Create a vehicle"})}):"";return Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsxs)("div",{className:"card card-container",children:[me,!ee&&(te||A.message)&&Object(n.jsx)(V,{uiState:A,data:ae,error:te}),!z&&je]})})},oe=function(){return Object(n.jsx)(ne,{apiURL:g.VEHICLES_API_URL,addCategoryIcon:!0,entityName:"vehicle",entityColumns:[{field:"ownerName",headerName:"Name",width:150},{field:"weight",width:110,headerName:"Weight",type:"number"},{field:"yearOfManifacture",width:90,headerName:"Year",type:"date"},{field:"manifacturer",headerName:"Manifacturer",width:140},{field:"categoryName",headerName:"Category",width:130}]})},ue={addManifacturer:function(e,t){return[].concat(Object(P.a)(e),[t])},updateManifacturer:function(e,t){return e.map((function(e){return e.id===t.id?{id:e.id,name:t.name}:e}))},deleteManifacturer:function(e,t){return e.filter((function(e){return e.id!==t}))}},le=Object(N.a)((function(e){return{formControl:{width:250}}})),de=function(){var e,t=Object(r.useContext)(m),a=t.manifacturers,c=t.setManifacturers,i=le(),s=Object(j.g)(),o=Object(j.i)().id;o=null!==(e=o)&&void 0!==e?e:0;var u=Object(r.useRef)({id:0,name:""}),f=function(e,t){I({successful:e,message:t})},h=Object(r.useState)(u.current),p=Object(b.a)(h,2),O=p[0],x=p[1],E=Object(r.useState)({successful:!0,message:""}),N=Object(b.a)(E,2),C=N[0],I=N[1],U=Object(r.useState)(Date.now()),A=Object(b.a)(U,2),L=A[0],M=A[1],T=Object(r.useState)(!1),P=Object(b.a)(T,2),F=P[0],D=P[1],B=Object(v.b)(g.MANIFACTURERS_API_URL,g.FETCH_OPTIONS),W=B.get,H=B.post,G=B.put,Q=B.del,z=B.response,X=B.loading,Y=B.error,q=B.data;function K(){return(K=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:O.name},e.next=3,H("",t);case 3:n=e.sent,z.ok?(x(u.current),f(!0,"Manifacturer added successfully. You can create another one..."),c(ue.addManifacturer(a,n))):f(!1,"Manifacturer could not add");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("",O);case 2:z.ok?(c(ue.updateManifacturer(a,O)),M(Date.now()),f(!0,"Manifacturer successfully updated"),s.push("/manifacturer/"+o.toString())):f(!1,"Manifacturer could not updated");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return $.apply(this,arguments)}function $(){return($=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/"+O.id);case 2:z.ok?(c(ue.deleteManifacturer(a,O.id)),f(!0,"Manifacturer deleted successfully. You can add a new manifacture..."),x(u.current),s.push("/manifacturer")):f(!1,"Manifacturer could not be deleted");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("/"+o.toString());case 2:(t=e.sent)&&t.name?(x(t),f(!0,"Manifacturer loaded/reloaded successfully")):(f(!1,"Manifacturer could not load"),D(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o>0&&function(){e.apply(this,arguments)}(),R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)||R.ValidatorForm.addValidationRule(g.REQUIRED_RULE,(function(e){return _(e)})),function(){R.ValidatorForm.hasValidationRule(g.REQUIRED_RULE)&&R.ValidatorForm.removeValidationRule(g.REQUIRED_RULE)}}),[o,W,L]);var ee=Object(r.useRef)(""),te=Object(r.useCallback)((function(e){ee.current=e}),[]),ae=Object(n.jsx)("div",{children:Object(n.jsxs)(R.ValidatorForm,{onSubmit:function(e){e.preventDefault(),o>0?"CreateUpdate"===ee.current?function(){J.apply(this,arguments)}():Object(y.confirmAlert)(w(Z,"Are you sure to delete this manifacturer?")):function(){K.apply(this,arguments)}()},children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(R.TextValidator,{id:"name",variant:"outlined",label:"Name",name:"name",className:i.formControl,value:O.name,onChange:function(e){return S(O,x,e)},validators:[g.REQUIRED_RULE],errorMessages:["Name is required"]})}),Object(n.jsx)(k,{updateSubmitButtonFunction:te,loading:X,submitButtonType:ee.current,id:o})]})}),ne=o>0?Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary btn",onClick:function(){x(u.current),I(!0,""),s.push("/manifacturer")},children:"Create a manifacturer"})}):"";return Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsxs)("div",{className:"card card-container",children:[ne,!X&&(Y||C.message)&&Object(n.jsx)(V,{uiState:C,data:q,error:Y}),!F&&ae]})})},be=function(){return Object(n.jsx)(ne,{apiURL:g.MANIFACTURERS_API_URL,entityName:"manifacturer",entityColumns:[{field:"name",headerName:"Name",width:250}]})},je=function(){var e=Object(r.useState)({}),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)({}),s=Object(b.a)(i,2),o=s[0],u=s[1],f=Object(r.useState)(""),h=Object(b.a)(f,2),E=h[0],R=h[1],N=Object(v.b)(g.MANIFACTURERS_API_URL,g.FETCH_OPTIONS),C=N.get,_=N.data;Object(r.useEffect)((function(){var e=[];Object(d.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,C();case 3:(a=t.sent)?e=a:R("Manifacturers could not be fetched. There must be a problem with the network or the web API."),c(e),u(!1);case 7:case"end":return t.stop()}}),t)})))()}),[C]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{children:E}),Object(n.jsx)("p",{children:A(_)})]}),Object(n.jsx)(p,{}),o?Object(n.jsx)(x,{}):Object(n.jsx)("div",{className:"container mt-3",children:Object(n.jsx)(m.Provider,{value:{manifacturers:a,setManifacturers:c},children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{exact:!0,path:"/",children:Object(n.jsx)(j.a,{to:"/vehicles"})}),Object(n.jsx)(j.b,{path:["/category/:id","/category"],children:Object(n.jsx)(T,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/categories",component:re}),Object(n.jsx)(j.b,{path:["/vehicle/:id","/vehicle"],children:Object(n.jsx)(se,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/vehicles",component:oe}),Object(n.jsx)(j.b,{path:["/manifacturer/:id","/manifacturer"],children:Object(n.jsx)(de,{})}),Object(n.jsx)(j.b,{exact:!0,path:"/manifacturers",component:be}),Object(n.jsx)(j.b,{path:"*",children:Object(n.jsx)(O,{})})]})})})]})};s.a.render(Object(n.jsx)(o.a,{children:Object(n.jsx)(je,{})}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.0d2e9450.chunk.js.map